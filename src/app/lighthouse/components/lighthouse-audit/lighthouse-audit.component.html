
<div *ngIf="loading" class="loading-indicator">Loading...</div>
<div *ngIf="metrics.performance && !loading">
  <!-- Performance Metrics Section -->
  <h2>Performance Metrics</h2>
  <p>First Contentful Paint: {{ metrics.performance.firstContentfulPaint }}</p>
  <p>Speed Index: {{ metrics.performance.speedIndex }}</p>
  <p>Largest Contentful Paint: {{ metrics.performance.largestContentfulPaint }}</p>
  <p>Time to Interactive: {{ metrics.performance.interactive }}</p>
  <p>Total Blocking Time: {{ metrics.performance.totalBlockingTime }}</p>
  <p>Cumulative Layout Shift: {{ metrics.performance.cumulativeLayoutShift }}</p>
</div>

<div *ngIf="metrics.sustainability && !loading">
  <!-- Sustainability Metrics Section -->
  <h2>Sustainability Metrics</h2>
  <div *ngIf="metrics.sustainability.resourceBreakdown?.length > 0">
    <p>Total CO₂ Emissions: {{ metrics.sustainability.totalCO2 }} g</p>
    <h3>Resource Breakdown</h3>
    <table>
      <thead>
        <tr>
          <th>Resource Type</th>
          <th>Total Size (MB)</th>
          <th>CO₂ Emissions (g)</th>
          <th>Contribution (%)</th>
        </tr>
      </thead>
      <tbody>
        <tr *ngFor="let resource of metrics.sustainability.resourceBreakdown">
          <td>{{ resource.resourceType }}</td>
          <td>{{ resource.size }}</td>
          <td>{{ resource.co2 }}</td>
          <td>{{ resource.contribution }}</td>
        </tr>
      </tbody>
    </table>
    <p><i>Note:</i> Contribution refers to the percentage of total CO₂ emissions generated by each resource type.</p>
  </div>
</div>

<button (click)="runAudit('https://apw.bss.design/')" [disabled]="loading">Run Audit</button>